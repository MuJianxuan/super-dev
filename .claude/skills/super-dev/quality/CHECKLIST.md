# 质量检查清单 (Quality Checklist)

> 每份输出必须对照检查，通过率 < 80% 不允许定稿。

---

## PRD 检查清单 (50 项)

### 战略层 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 1 | 价值主张清晰 | 一句话能说清楚为谁解决什么问题 |
| 2 | 目标用户具体 | 有画像，不是"所有人" |
| 3 | 痛点有依据 | 有用户研究数据或引用 |
| 4 | 盈利模式明确 | 说清楚怎么赚钱 |
| 5 | 市场规模有数据 | 有具体数字和来源 |
| 6 | 竞品分析完整 | 至少3个竞品对比 |
| 7 | 差异化清晰 | 能用一句话说明区别 |
| 8 | 成功指标量化 | 有具体数字目标 |
| 9 | 里程碑合理 | 时间节点现实可行 |
| 10 | 风险已识别 | 列出主要风险和缓解措施 |

### 功能层 (15 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 11 | 功能列表完整 | 覆盖核心场景 |
| 12 | 优先级标注 | 每个功能有 P0/P1/P2 |
| 13 | P0 必须性验证 | P0 真的是"没有不行" |
| 14 | Out of Scope 明确 | 明确不做什么 |
| 15 | User Story 格式规范 | As a...I want...So that |
| 16 | 验收标准完整 | 每个 Story 有 Given/When/Then |
| 17 | 验收标准可测试 | 能写成自动化测试 |
| 18 | 边界情况考虑 | 空值、极大值、并发等 |
| 19 | 错误处理定义 | 出错时的行为明确 |
| 20 | 依赖关系清晰 | 功能间依赖有说明 |
| 21 | MVP 范围明确 | 清楚列出 MVP 包含什么 |
| 22 | MVP 够小 | 能在 2-4 周完成 |
| 23 | 演进路线图 | 后续版本规划 |
| 24 | 非功能需求定义 | 性能/安全/可用性 |
| 25 | 非功能有指标 | 具体数字，不是"快" |

### 指标层 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 26 | 北极星指标定义 | 一个最重要的指标 |
| 27 | 北极星对齐商业目标 | 指标提升=商业成功 |
| 28 | 使用 HEART 框架 | 覆盖多维度 |
| 29 | 每个指标有目标值 | 具体数字 |
| 30 | 目标值参考基准 | 有行业数据支撑 |
| 31 | 有衡量方法 | 说明如何采集数据 |
| 32 | 有预警阈值 | 什么情况需要报警 |
| 33 | 考虑反向指标 | 防止刷量作弊 |
| 34 | 埋点规划 | 需要埋哪些点 |
| 35 | A/B 测试计划 | 如何验证假设 |

### 表达层 (15 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 36 | 结构清晰 | 有目录，层级分明 |
| 37 | 术语统一 | 同一概念用同一词 |
| 38 | 有术语表 | 专业术语有定义 |
| 39 | 无模糊表述 | 不用"尽快""适当"等 |
| 40 | 图表清晰 | 图能看懂，有标注 |
| 41 | 有流程图 | 复杂流程用图示 |
| 42 | 有 Mermaid 可视化 | 使用标准格式 |
| 43 | 决策有理由 | 为什么这样做 |
| 44 | 假设已标注 | 不确定的内容标明 |
| 45 | 依赖已列出 | 需要什么外部条件 |
| 46 | 有变更日志 | 记录修改历史 |
| 47 | 版本号清晰 | v1.0 格式 |
| 48 | 作者和日期 | 知道谁写的，什么时候 |
| 49 | 评审意见记录 | 反馈和处理结果 |
| 50 | 文档状态标注 | Draft/Review/Approved |

---

## 架构检查清单 (35 项)

### 设计合理性 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 1 | 架构匹配规模 | 不过度设计，也不拮据 |
| 2 | 支持预期扩展 | 10x 用户量能扛住 |
| 3 | 分层清晰 | 每层职责明确 |
| 4 | 层间边界明确 | 知道什么在哪一层 |
| 5 | 无循环依赖 | 依赖是单向的 |
| 6 | 有 ADR 记录 | 关键决策有文档 |
| 7 | 演进路径规划 | 未来怎么升级 |
| 8 | 匹配团队能力 | 团队能驾驭这个技术栈 |
| 9 | 无单一依赖 | 不会被某个技术卡脖子 |
| 10 | 有替代方案对比 | 为什么选这个 |

### 可靠性 (8 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 11 | 识别单点故障 | 列出可能的单点 |
| 12 | 关键服务冗余 | 不止一个实例 |
| 13 | 定义 SLA/SLO | 99.9% 还是 99.99% |
| 14 | 熔断/限流机制 | 过载保护 |
| 15 | 健康检查 | 知道服务是否活着 |
| 16 | 自动恢复策略 | 挂了能自动拉起 |
| 17 | 灾难恢复计划 | 机房挂了怎么办 |
| 18 | 数据备份策略 | 多久备份一次 |

### 性能 (7 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 19 | 定义性能目标 | P99 延迟要求 |
| 20 | 识别性能瓶颈 | 最慢的是哪里 |
| 21 | 有缓存策略 | 热点数据怎么缓存 |
| 22 | 缓存失效策略 | 什么时候失效 |
| 23 | 考虑热点问题 | 某个 key 特别热怎么办 |
| 24 | 数据库索引规划 | 哪些字段建索引 |
| 25 | 性能监控方案 | 怎么发现慢 |

### 安全 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 26 | 认证机制 | 怎么验证身份 |
| 27 | 授权控制 | 谁能访问什么 |
| 28 | 敏感数据加密 | 密码不明文存储 |
| 29 | HTTPS/TLS | 通信加密 |
| 30 | 防护 OWASP Top 10 | 常见漏洞都考虑了 |
| 31 | 审计日志 | 谁什么时候做了什么 |
| 32 | 速率限制 | 防止恶意刷 |
| 33 | 密钥管理 | 密钥不硬编码 |
| 34 | 定期安全审计 | 有计划做渗透测试 |
| 35 | 合规要求 | GDPR/等保等 |

---

## UI 检查清单 (30 项)

### 视觉一致性 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 1 | 色彩系统完整 | 主色/语义色/中性色都有 |
| 2 | 色彩符合品牌 | 和品牌调性一致 |
| 3 | 字体系统规范 | 层级、字重都定义 |
| 4 | 间距系统统一 | 用 4px 或 8px 倍数 |
| 5 | 圆角/阴影一致 | 全局统一 |
| 6 | 图标风格统一 | 线性/面性统一 |
| 7 | 组件样式可复用 | 有设计系统 |
| 8 | 状态样式完整 | hover/active/disabled |
| 9 | 深色模式考虑 | 有没有暗色方案 |
| 10 | 品牌元素正确 | Logo、颜色正确使用 |

### 无障碍 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 11 | 对比度 >= 4.5:1 | 文字能看清 |
| 12 | 触摸区域 >= 44x44px | 手指能点到 |
| 13 | 不只靠颜色区分 | 色盲也能用 |
| 14 | 焦点状态可见 | 键盘用户知道在哪 |
| 15 | 支持键盘导航 | Tab 能切换 |
| 16 | 图片有 alt 文本 | 读屏器能读 |
| 17 | 表单有 label | 知道填什么 |
| 18 | 错误提示清晰 | 知道错在哪 |
| 19 | 考虑读屏器 | VoiceOver 能用 |
| 20 | 语义化 HTML | 用对 tag |

### 响应式 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 21 | 断点合理定义 | 覆盖主流设备 |
| 22 | 移动端优先 | 先设计小屏 |
| 23 | 触摸交互友好 | 手势合理 |
| 24 | 横竖屏适配 | 翻转不变形 |
| 25 | 大屏利用空间 | 不是居中一条 |
| 26 | 字体可缩放 | 用 rem 不用 px |
| 27 | 图片响应式加载 | 小屏不加载大图 |
| 28 | 导航适配小屏 | 有汉堡菜单 |
| 29 | 表格可滚动/折叠 | 小屏能看 |
| 30 | 弹窗适配小屏 | 不超出屏幕 |

---

## 交互检查清单 (25 项)

### 流程合理性 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 1 | 核心任务 <= 5 步 | 不要太长 |
| 2 | 无多余步骤 | 每步都有意义 |
| 3 | 用户路径清晰 | 知道下一步干嘛 |
| 4 | 无死胡同 | 每个页面有出路 |
| 5 | 支持撤销/返回 | 做错能改 |
| 6 | 长流程有进度 | 知道到第几步 |
| 7 | 有预设值 | 减少输入 |
| 8 | 表单分步骤 | 不一次填太多 |
| 9 | 必填/选填清晰 | * 标注必填 |
| 10 | 支持草稿保存 | 填一半能保存 |

### 反馈及时性 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 11 | 点击有即时反馈 | < 100ms |
| 12 | 加载有进度提示 | > 300ms 显示 |
| 13 | 成功有确认 | 知道成功了 |
| 14 | 失败有明确说明 | 知道为什么失败 |
| 15 | 错误有恢复建议 | 告诉怎么修 |
| 16 | 有空状态设计 | 没数据时显示什么 |
| 17 | 有骨架屏/占位 | 加载时不空白 |
| 18 | Toast 时长合理 | 2-3 秒自动消失 |
| 19 | 危险操作二次确认 | 删除要确认 |
| 20 | 避免重复提交 | 按钮防抖 |

### 一致性 (5 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 21 | 相同操作相同入口 | 编辑都在右上角 |
| 22 | 手势符合平台规范 | iOS/Android 不同 |
| 23 | 术语一致 | 保存/提交不混用 |
| 24 | 同类场景交互一致 | 列表都是下拉刷新 |
| 25 | 遵循平台设计规范 | Material/HIG |

---

## 代码检查清单 (60 项)

### 安全 (20 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 1 | 无 SQL 注入风险 | 参数化查询 |
| 2 | 无 XSS 风险 | 输出转义 |
| 3 | 有 CSRF 防护 | Token 验证 |
| 4 | 无路径遍历风险 | 文件路径校验 |
| 5 | 无命令注入风险 | 不拼接命令 |
| 6 | 用户输入已验证 | 类型/范围校验 |
| 7 | 输出已转义 | HTML/JS 转义 |
| 8 | 无敏感数据暴露 | 不返回密码 |
| 9 | 日志不泄露敏感信息 | 不记录密码 |
| 10 | 错误信息不泄露内部细节 | 不显示堆栈 |
| 11 | 无越权访问风险 | 检查权限 |
| 12 | 认证逻辑正确 | 正确验证身份 |
| 13 | 密码正确哈希 | bcrypt/argon2 |
| 14 | 使用安全随机数 | 不用 Math.random |
| 15 | 加密算法安全 | 不用 MD5/SHA1 |
| 16 | 密钥不硬编码 | 用环境变量 |
| 17 | 依赖无已知漏洞 | npm audit |
| 18 | HTTPS 正确配置 | 证书有效 |
| 19 | Cookie 安全标志 | HttpOnly/Secure |
| 20 | CORS 正确配置 | 不是 * |

### 性能 (15 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 21 | 无 N+1 查询 | 一次批量查 |
| 22 | 无不必要查询 | 需要才查 |
| 23 | 有合理缓存 | 热点数据缓存 |
| 24 | 无内存泄漏风险 | 事件监听清理 |
| 25 | 及时关闭资源 | DB 连接关闭 |
| 26 | 循环内无昂贵操作 | 不在循环里查库 |
| 27 | 无不必要阻塞 | 用异步 I/O |
| 28 | 大数据分页 | 不一次返回全部 |
| 29 | 有合理索引 | 查询走索引 |
| 30 | 使用连接池 | 复用连接 |
| 31 | 无不必要同步 | 不过度加锁 |
| 32 | 并发安全 | 没有竞态条件 |
| 33 | 合理使用异步 | I/O 操作异步 |
| 34 | 前端无不必要渲染 | 用 memo |
| 35 | 图片/资源优化 | 压缩/懒加载 |

### 可维护性 (15 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 36 | 命名清晰 | 见名知意 |
| 37 | 函数职责单一 | 一个函数做一件事 |
| 38 | 函数长度合理 | < 50 行 |
| 39 | 无重复代码 | DRY 原则 |
| 40 | 无魔法数字 | 用常量 |
| 41 | 注释有意义 | 解释为什么 |
| 42 | 无过时注释 | 注释和代码一致 |
| 43 | 错误处理恰当 | catch 后有处理 |
| 44 | 日志有用 | 能帮助排查 |
| 45 | 遵循 SOLID | 设计原则 |
| 46 | 抽象合理 | 不过度抽象 |
| 47 | 依赖合理 | 不依赖具体实现 |
| 48 | 容易测试 | 可以 mock |
| 49 | 有单元测试 | 核心逻辑有测试 |
| 50 | 测试覆盖率够 | > 70% |

### 规范 (10 项)

| # | 检查项 | 通过标准 |
|:---|:---|:---|
| 51 | 符合代码风格 | ESLint/Prettier |
| 52 | 通过 Lint | 无警告 |
| 53 | 有类型检查 | TypeScript |
| 54 | 有 API 文档 | Swagger/OpenAPI |
| 55 | 有变更日志 | CHANGELOG.md |
| 56 | Commit 信息规范 | Conventional |
| 57 | 有 README | 知道怎么用 |
| 58 | 版本号正确 | SemVer |
| 59 | 有配置文件示例 | .env.example |
| 60 | 有部署文档 | 知道怎么部署 |

---

## 使用方法

1. 根据输出类型选择对应检查清单
2. 逐项检查，记录通过/未通过
3. 计算通过率：通过数 / 总数 × 100%
4. **通过率 < 80%**：返回修改
5. **通过率 >= 80%**：可以定稿
